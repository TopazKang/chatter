# 회사 주차 관리 서비스 (Company Parking Management Service)

## 프로젝트 개요
회사 직원들의 주차권 구매 및 사용 내역을 관리하고, 전체 잔여 주차권 수량을 실시간으로 확인할 수 있는 웹 기반 서비스입니다.

## 프로젝트 정보
- **프로젝트명**: 회사 주차 관리 서비스
- **대상 사용자**: 회사 임직원
- **배포 방식**: Docker Compose를 활용한 턴키(Turnkey) 배포

---

## 페르소나 간 대화 기록

### 📋 요구사항 분석 단계 (Requirements Analysis Phase)

#### 🎯 프로젝트 매니저 (Project Manager)

**[2024년 분석 시작]**

안녕하세요, 프로젝트 매니저입니다. 주차 관리 서비스 프로젝트의 요구사항 분석을 시작합니다.

**핵심 요구사항 정리:**

1. **사용자 인터페이스 요구사항**
   - 사용자 이름 입력 필드
   - 구매/사용 선택 버튼
   - 수량 입력 필드
   - 현재 잔여 주차권 총 수량 표시

2. **기능 요구사항**
   - 주차권 구매 기록 저장
   - 주차권 사용 기록 저장
   - 전체 직원의 주차권 데이터 집계
   - 실시간 잔여 주차권 수량 계산 및 표시

3. **비기능 요구사항**
   - Docker Compose 기반 턴키 배포
   - 데이터베이스 영속성 보장
   - 간편한 설치 및 실행

**기술적 의사결정 근거:**

이 프로젝트는 다음과 같은 이유로 기술 스택을 선정해야 합니다:

1. **프론트엔드**: 직원들이 쉽게 사용할 수 있는 직관적인 UI가 필요합니다.
   - React 또는 Vue.js와 같은 현대적인 프레임워크를 사용하여 반응형 UI 구현
   - 실시간 데이터 업데이트를 위한 비동기 통신 구현

2. **백엔드**: 주차권 데이터의 CRUD(Create, Read, Update, Delete) 작업과 집계 기능이 필요합니다.
   - RESTful API 설계를 통한 명확한 엔드포인트 구조
   - Node.js(Express) 또는 Python(Flask/FastAPI)과 같은 경량 프레임워크 사용

3. **데이터베이스**: 주차권 구매/사용 내역의 영속적 저장과 집계 연산이 필요합니다.
   - PostgreSQL 또는 MySQL: 트랜잭션 지원 및 안정성
   - 또는 MongoDB: 유연한 스키마 (초기 프로토타입에 적합)

4. **배포**: Docker Compose를 통한 턴키 배포로 설치 복잡도를 최소화합니다.
   - 프론트엔드, 백엔드, 데이터베이스를 컨테이너로 분리
   - `docker-compose up` 한 번으로 전체 서비스 실행 가능

**다음 단계 계획:**

1. 기술 스택 최종 확정 (개발자와 협의)
2. 데이터베이스 스키마 설계
3. API 엔드포인트 설계
4. UI/UX 와이어프레임 작성
5. 개발 환경 설정

---

## 상세 요구사항 명세서 (Detailed Requirements Specification)

### 1. 기능 요구사항 (Functional Requirements)

#### FR-1: 주차권 구매 기능
- **설명**: 직원이 주차권을 구매한 내역을 시스템에 기록합니다.
- **입력**: 사용자 이름, 구매 수량
- **처리**: 데이터베이스에 구매 트랜잭션 저장
- **출력**: 구매 완료 메시지, 업데이트된 총 잔여 수량
- **당위성**: 주차권의 입고 관리를 통해 전체 재고를 추적할 수 있어야 합니다.

#### FR-2: 주차권 사용 기능
- **설명**: 직원이 주차권을 사용한 내역을 시스템에 기록합니다.
- **입력**: 사용자 이름, 사용 수량
- **처리**: 데이터베이스에 사용 트랜잭션 저장
- **출력**: 사용 완료 메시지, 업데이트된 총 잔여 수량
- **당위성**: 주차권의 출고 관리를 통해 실제 사용량을 정확히 파악할 수 있어야 합니다.

#### FR-3: 총 잔여 주차권 수량 계산
- **설명**: 전체 직원의 구매 수량 합계에서 사용 수량 합계를 빼서 현재 잔여 수량을 계산합니다.
- **계산식**: `총 잔여 수량 = Σ(구매 수량) - Σ(사용 수량)`
- **출력**: 실시간 업데이트되는 잔여 수량 표시
- **당위성**: 회사 전체의 주차권 재고를 한눈에 파악하여 추가 구매 필요성을 판단할 수 있어야 합니다.

#### FR-4: 트랜잭션 이력 조회
- **설명**: 특정 직원 또는 전체 직원의 주차권 거래 내역을 조회합니다.
- **입력**: 사용자 이름 (선택적)
- **출력**: 시간순으로 정렬된 거래 내역 목록
- **당위성**: 투명한 주차권 관리를 위해 모든 거래 내역이 추적 가능해야 합니다.

### 2. 비기능 요구사항 (Non-Functional Requirements)

#### NFR-1: 사용성 (Usability)
- 직관적인 UI로 IT 지식이 적은 직원도 쉽게 사용 가능해야 함
- 3번의 클릭 이내에 모든 주요 기능 접근 가능

#### NFR-2: 성능 (Performance)
- 페이지 로딩 시간 < 2초
- 트랜잭션 처리 시간 < 1초

#### NFR-3: 신뢰성 (Reliability)
- 데이터 손실 방지를 위한 데이터베이스 영속성 보장
- 트랜잭션 무결성 보장 (ACID 특성)

#### NFR-4: 배포 편의성 (Deployment Ease)
- Docker Compose 한 번의 명령으로 전체 서비스 실행 가능
- 환경 변수를 통한 설정 커스터마이징 지원

#### NFR-5: 유지보수성 (Maintainability)
- 명확한 코드 구조 및 주석
- README에 설치/실행/개발 가이드 포함

### 3. 데이터 모델 설계 (초안)

#### Transactions 테이블
```
┌──────────────┬──────────────┬─────────────────┐
│ 필드명       │ 데이터 타입  │ 설명            │
├──────────────┼──────────────┼─────────────────┤
│ id           │ INTEGER      │ 기본키 (자동증가)│
│ user_name    │ VARCHAR(100) │ 직원 이름       │
│ type         │ ENUM         │ 'purchase'/'use'│
│ quantity     │ INTEGER      │ 수량            │
│ created_at   │ TIMESTAMP    │ 거래 시간       │
└──────────────┴──────────────┴─────────────────┘
```

**설계 근거:**
- 단일 테이블로 구매/사용 내역을 모두 관리하여 데이터 구조를 단순화
- `type` 필드로 거래 유형을 구분하여 집계 쿼리가 간단해짐
- `created_at`으로 시간순 정렬 및 이력 추적 가능

### 4. API 엔드포인트 설계 (초안)

```
POST   /api/transactions          # 주차권 구매/사용 기록 생성
GET    /api/transactions          # 전체 트랜잭션 조회
GET    /api/transactions/balance  # 현재 잔여 수량 조회
GET    /api/transactions/user/:name # 특정 사용자 트랜잭션 조회
```

### 5. 개발 마일스톤 (Development Milestones)

```
Phase 1: 프로젝트 초기 설정 (예상 소요: 1일)
├── 기술 스택 확정
├── 프로젝트 구조 생성
├── Docker 환경 설정
└── Git 저장소 설정

Phase 2: 백엔드 개발 (예상 소요: 2-3일)
├── 데이터베이스 스키마 구현
├── API 엔드포인트 구현
├── 비즈니스 로직 구현
└── 단위 테스트 작성

Phase 3: 프론트엔드 개발 (예상 소요: 2-3일)
├── UI 컴포넌트 구현
├── API 연동
├── 상태 관리 구현
└── 반응형 디자인 적용

Phase 4: 통합 및 테스트 (예상 소요: 1-2일)
├── 프론트엔드-백엔드 통합
├── 통합 테스트
├── 사용자 시나리오 테스트
└── 버그 수정

Phase 5: 배포 및 문서화 (예상 소요: 1일)
├── Docker Compose 최종 설정
├── 배포 가이드 작성
├── 사용자 매뉴얼 작성
└── 최종 검수
```

### 6. 리스크 관리 (Risk Management)

| 리스크 | 영향도 | 발생 가능성 | 대응 방안 |
|--------|--------|-------------|-----------|
| 동시 트랜잭션 처리 시 데이터 충돌 | 높음 | 중간 | 데이터베이스 트랜잭션 락 적용 |
| Docker 환경 설정 문제 | 중간 | 낮음 | 상세한 troubleshooting 가이드 작성 |
| 확장성 부족 (사용자 증가) | 중간 | 낮음 | 초기에는 단순 구조, 필요시 확장 설계 |

---

## 다음 작업 지시사항

### 백엔드 개발자에게:
1. 기술 스택 제안 (Node.js vs Python)
2. 데이터베이스 선택 제안 (PostgreSQL vs MySQL vs MongoDB)
3. API 명세서 상세화
4. 초기 백엔드 프로젝트 구조 생성

### 프론트엔드 개발자에게:
1. UI 프레임워크 제안 (React vs Vue.js)
2. 와이어프레임 또는 목업 디자인
3. 초기 프론트엔드 프로젝트 구조 생성

### QA 엔지니어에게:
1. 테스트 시나리오 작성
2. 테스트 체크리스트 준비

---

*이 문서는 프로젝트 진행에 따라 지속적으로 업데이트됩니다.*
